#### 什么是IP、mac地址、netmask、默认网关

> IP：标记逻辑上的网络地址；
>
> mac地址：标记实际的物理设备地址，用于唯一识别一台设备，设备网络间传输实际上通过mac地址进行识别传输，而不是ip，ip地址只是网络层中用来决定是否解析数据包的标记；
>
> netmask：即掩码，和ip地址一起使用来确定网络号；
>
> 默认网关：发送的ip不再同一网段内，或者该网段内没有该ip地址的主机，数据就会发送给默认网关\(默认网关一般是设置在路由设备上的ip地址，是局域网数据对外的关口，数据通过这个ip可以发送到其他额网段的ip中\)。

#### TCP/IP协议分层

tcp/ip协议是所有网络协议的总称，并不是两个单独的协议。

> 链路层、网络层、传输层、应用层

#### OSI网络模型

> 物理层、数据链路层、网络层、传输层、会话层、表示层、应用层

#### TCP/IP分布的各层协议

![](/assets/20180110204045937789.png)

#### 三次握手和四次挥手

Http协议是基于tcp协议的，在开始http访问之前，先要进行tcp的三次握手，只有三次握手成功，才能进行Http访问；

三次握手：客户端发送SYN同步数据包给服务端，然后等待服务器确认；服务端接收到客户端的同步数据包之后，对同步数据包的数据进行标记进一个ACK确认数据包，加上一个SYN同步数据包一起返回给客户端；客户端在接收到服务端的确认数据包之后，也会对确认数据包SYN状态位进行标记，然后通过发送ACK确认包给服务端，至此，三次握手结束，可以开始Http访问；在理想状态下，除非服务端或客户端主动发出断开请求，否则TCP连接会一直保持；

四次挥手：客户端发送一个FIN结束数据包和ACK数据包给服务端，然后等待回应；服务端接收到客户端的结束数据包，对数据进行标记，先返回一个ACK确认数据包给客户端；接着服务端关闭了与客户端的连接，再发送一个FIN结束数据包给客户端；同样，客户端接收到FIN结束数据包后，会对数据进行标记，然后发送一个ACK确认数据包给服务端；至此，四次挥手结束。

#### HTTP和HTTPS

HTTP全称超文本传输协议，是一种建立在tcp协议基础上的应用层传输协议；

HTTP最显著的特点就是在建立连接前，需要先进行三次握手，三次握手成功后，以后客户端每次请求，都需要服务端回复一个AKC确认包，并且在请求结束后，会主动断开连接\(所以HTTP是一种"短链接"\)。

长连接：为了保持客户端程序的在线状态，客户端需要一种轮询机制，每隔一段时就向服务端发送请求，来保持连接；否则，如果服务端长时间没有接收到客户端的请求，则会认为客户端已下线，而客户端的请求如果长时间没有接收到服务端的回应，则认为网络已经断开；

Http解决的是数据的包装问题；

HTTPS可以认为是更加安全的HTTP，它在HTTP的基础上添加了SSL层，用于数据的加密传输；目前的主流浏览器都强制走HTTPS协议；

* Http发展到现在已经是一套很成熟的协议，协议本身标准化、文本化，具有很高的可读性，并且有大量的现有框架代码支持，是一套各个端通用的协议；
* Http本身的缺点也很明显，首先性能较差\(需要三次握手，每次请求都需要得到确认\)，实时性差，无法做到长时间连接，不适合实时性高的应用，比如IM应用\(采用XMPP协议\)；

#### Get、Post

Get和post最大的区别在于post请求存在内容实体，而get请求不存在内容实体；

Get请求设计的初衷就是用来向服务端请求数据的，虽然可以通过QueryString向服务端提交数据，但它的作用仅仅是用来获取内容时需要使用的参数而已\(获取内容的一种附加手段\)；而Post则是真正可以向服务端提交内容的；

两者都能向服务端发送数据，但Get方式安全性较低，Post则安全性更高一些，在效率上，Get方式更好一些。

一般的查询操作，我们使用Get方式，而数据的增删改则使用Post；

#### 浏览器输入访问网页的过程

> 假设目标主机地址：[http://localhost:8080/simple.htm](http://localhost:8080/simple.htm)
>
> 协议名：http
>
> 主机名：localhost
>
> 端口：8080
>
> 对象路径：/simple.htm

* 当我们从浏览器中数据地址之后按回车，浏览器会从这个地址中解析出对应的协议名、主机名、端口、以及对象地址，其中的主机名和端口通过查询DNS服务器获知；
* 把解析到的信息结合本机信息，封装成一个http请求数据包；
* 使用TCP协议连接到指定主机的指定端口\(localhost,8080\)，并将封装好的数据包发送给它\(这部分由Socket完成\)；
* 等待服务器返回数据，解析并显示返回的数据；

#### TCP与UDP的区别

tcp需要经过三次握手的过程才能建立连接，udp不需要，当时数据报中需要制定目的ip；

tcp每次发送数据都需要接收方进行确认反馈，而udp则不需要，所tcp传输比udp更可靠，但在传输效率上，udp比tcp更快；

#### SOCKET

套接字，是网络通信的基石！

Http是应用层的协议，解决的是数据的包装问题，而Tcp和Udp是传输层的协议，解决的是数据如何传输的问题；

网络通信过程实际就是在操作Socket进行数据包的传输。

Socket封装了对tcp/udp协议编程的接口。

**TCP/UDP协议基于网络层的IP协议\(需要借助IP协议才能实现传输\)，而应用层的HTTP协议又基于传输层的TCP/UDP协议\(需要借助TCP/UDP进行数据传输\)。**

Socket连接又分为长连接和短连接，像Http请求这种就是短连接，每次建立一个Socket，请求完数据后又会把Socket关闭掉；

而像IM通讯这种就是需要用到长连接了，客户端和服务端之间通过定时的互推数据，来保持之间连接的存活；

应用层通过传输层进行数据通讯时，借助的就是Socket。客户端Socket根据传输的协议\(tcp/udp\)，根据给定的服务端ip和端口向服务端发出连接请求，而服务端的Socket一直处于监听状态，当它监听到有Socket连接请求时，它就会取出这个客户端Socket的连接信息，然后开启一个线程，**创建一个新的Socket与客户端Socket进行通讯**。\(服务端接收到客户端连接请求后，是否发送数据给客户端进行确认？\)

服务端初始化创建一个Socket，然后绑定到特定的端口，对该端口进行监听，接着调用accept方法阻塞，等待客户端请求连接。

当服务端监听到有客户端连接请求时，则会立马读取出客户端Socket的信息，然后开启一个新的线程创建一个Socket用于与客户端Socket进行通信，通讯完毕后，关闭Socket；

